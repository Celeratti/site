<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maquina-Cadastro</title>
    <link rel="stylesheet" href="assets/css/index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Great+Vibes&family=Poppins:wght@300&family=Raleway&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="./assets/img/celeratti-mascote.png" type="image/x-icon">
</head>
<body>
    <!--<h1 class="tituloPrincipal">CELERATTI</h1>-->
    <div class="teste-logo"> 
        <img src="assets/img/CELERATTI.png" alt="">
    </div>
    <img src="assets/img/seta.png" class="seta" alt="">

    <h1 class="nomeEmpresa">Via Mobilidade</h1>
    <h1 class="subTitulo">Cadastro de máquinas</h1>
    <img src="assets/img/add.png" id="add" alt="">
<button id="btn_add" data-toggle="modal" data-target="#exampleModal" onclick="Adicionar()"> Add Máquina</button>
<img src="assets/img/lupa.png" alt="" id="icon_lupa">
<input type="text" id="ipt_pesquisar" placeholder="Pesquisar">
<table id="tabela">

    <th>Estação</th>
    <th>Andar</th>
    <th>Nome máquina</th>
    <th>Sistema Operacional</th>
    <th>Fabricante</th>
    <th>Status</th>
    <th id="thOpcoes">
        <img src="assets/img/gear.png" alt="" id="imgGear">
    </th>
  </tr>
  <tr>
    <td>Presidente Altino</td>
    <td>2</td>
    <td>alt@2</td>
    <td>Linux</td>
    <td>Dell</td>
    <td>Desativado</td>
    <td>
        <img id="imgLapis" src="assets/img/lapis.png" alt="" class="opcoesTabela" onclick="editar('Presidente Altino', '2', 'alt@2	', 'Linux', 'Dell', 'Ativado', this)">
        <img id="imgLixeira" src="assets/img/lixeira.png" alt="" class="opcoesTabela" onclick="Excluir('alt@2', this)">
    </td>
  </tr>
  <tr>
    <td>Osasco</td>
    <td>4</td>
    <td>osas@3</td>
    <td>Windowns</td>
    <td>Lenovo</td>
    <td>Atívado</td>
    <td>
        <img src="assets/img/lapis.png" alt="" class="opcoesTabela">
        <img src="assets/img/lixeira.png" alt="" class="opcoesTabela">
    </td>  </tr>
  <tr>
    <td>Ceasa</td>
    <td>6</td>
    <td>cea@1</td>
    <td>Linux</td>
    <td>Lenovo</td>
    <td>Atívado</td>
    <td>
        <img src="assets/img/lapis.png" alt="" class="opcoesTabela">
        <img src="assets/img/lixeira.png" alt="" class="opcoesTabela">
    </td>  </tr>
  
</table>

<div class="modal" id="modal">
    <div class="modal-content">
        <div class="modal-header">
            Adicionar nova máquina
        </div>
        <div class="form-group">
            <label for="nome">Estação:</label>
            <input type="text" id="nome" name="nome" required oninput="validarNome()">
            <section id="labelNome">A estação não pode ser nulo</section>
        </div>
        <div class="form-group">
            <label for="nome">Andar:</label>
            <input type="text" id="nome2" name="nome" required oninput="validarNome()">
            <section id="labelNome">O andar não pode ser nulo</section>
        </div>
        <div class="form-group">
            <label for="sobrenome">Nome máquina:</label>
            <input type="text" id="sobrenome" name="sobrenome" required oninput="validarSobrenome()">
            <section id="labelSobrenome">O Sobrenome não pode ser nulo</section>

        </div>
        <div class="form-group">
            <label for="email">Sistema Operacional:</label>
            <input type="email" id="email" name="email" required oninput="validarEmail()">
            <section id="labelEmail">Sistema Operacional Inválido</section>

        </div>
        <div class="form-group">
            <label for="telefone">Fabricante:</label>
            <input id="telefone" type="text" placeholder="">
            <section id="labelTelefone">Fabricante Inválido</section>

        </div>
        <div class="form-group">
            <label for="cargo">Status:</label>
            <select name="cargo" id="cargo">
                <option value="Ativado">Ativado</option>
                <option value="Desativado">Desativado</option>
              </select>
        </div>
        <hr>
        <div style="display: flex; justify-content: flex"></div>
            <div style="display: flex; justify-content: flex-end">
                <button class="btn" id="btnCancel" style="background-color: #9F111B;">Cancelar</button>
                <button class="btn" id="btnSave" style="background-color: #9F111B;" onclick="Salvarr()" id="">Salvar</button>
            </div>
        </div>
    </div>

	<div class="modalEx" id="modalEx">
		<div class="modalEx-content">
			<div class="modalEx-header">
				Adicionar novo funcionário
			</div>
			<div class="form-group">
				<label for="nome" id="lblExcluir">Deseja excluir a máquina 	alt@2</label>
			</div>




			
            <hr id="linhaExcluir">
			<div style="display: flex; justify-content: flex"></div>
                <div style="display: flex; justify-content: flex-end">
                    <button class="btn" style="background-color: #9F111B;" onclick="CancelarEx()">Cancelar</button>
                    <button  class="btn" style="background-color: #9F111B;" onclick="ExcluirFinal(this)">Excluir</button>
                </div>
            </div>
        </div>


</body>
</html>



        <script>
            var acao =""
            var linhaEscolhida = "";

            function editar(nome, sobrenome, email, telefone, cargo, ativado, celulaLapis){

                modal.style.display = "block";
                document.querySelector("#nome").value = nome
                document.querySelector("#nome2").value = sobrenome
                document.querySelector("#sobrenome").value = email
                document.querySelector("#telefone").value = cargo
                document.querySelector("#email").value = telefone
                //document.querySelector("#cargo").value = email

                acao ="Editar"

                
                linhaEscolhida =celulaLapis.parentNode.parentNode
                
            }   
            const modalEx = document.getElementById("modalEx");


            function Excluir(nome, celulaLixeira){
                modalEx.style.display = "block";
                document.querySelector("#lblExcluir").innerHTML = "Deseja excluir a máquina "+ nome+ "?"
                linhaEscolhida = celulaLixeira.parentNode.parentNode;
                console.log(linhaEscolhida)
            }
                

            function Salvarr(){

               
                var nomeRecebido = validarNome()

                var sobreNomeRecebido = validarSobrenome()

                var emailRecebido = validarEmail()

                

                if(acao == "Salvar"){


                var novaLinha = document.createElement("tr");
                var colunaNome = document.createElement("td");
                var colunaSobrenome = document.createElement("td");
                var colunaEmail = document.createElement("td");
                var colunaTelefone = document.createElement("td");
                var colunaTokem = document.createElement("td");
                var colunaCargo = document.createElement("td");
                var tdImagens = document.createElement("td");

                var cargoRecebido = document.querySelector("#cargo").value

                var novaImagem = document.createElement("img");
                novaImagem.id = "imgLapis";
                novaImagem.src = "assets/img/lapis.png";
                novaImagem.alt = "";
                novaImagem.classList.add("opcoesTabela");
                novaImagem.setAttribute("onclick", "editar('Maria', 'Oliveira Sales', 'maria@gmail.com', '(11) 971002286', '764', 'Gerente')");

                var novaImagem2= document.createElement("img");
                novaImagem2.id = "imgLixeira";
                novaImagem2.src = "assets/img/lixeira.png";
                novaImagem2.alt = "";
                novaImagem2.classList.add("opcoesTabela");
                novaImagem2.setAttribute("onclick", "Excluir('Maria', 'Oliveira Sales')");

                colunaNome.innerHTML =nomeRecebido
                colunaSobrenome.innerHTML =document.querySelector("#nome2").value
                colunaEmail.innerHTML =document.querySelector("#sobrenome").value
                colunaTelefone.innerHTML = document.querySelector("#email").value
                colunaTokem.innerHTML =document.querySelector("#telefone").value
                colunaCargo.innerHTML =cargoRecebido

                 novaLinha.appendChild(colunaNome);
                 novaLinha.appendChild(colunaSobrenome);
                 novaLinha.appendChild(colunaEmail);
                 novaLinha.appendChild(colunaTelefone);
                 novaLinha.appendChild(colunaTokem);
                 novaLinha.appendChild(colunaCargo);

                 var imagem = document.querySelector("#imgLapis")

                 tdImagens.appendChild(novaImagem)
                 tdImagens.appendChild(novaImagem2)

                 novaLinha.appendChild(tdImagens);               

                 var tabela = document.getElementById("tabela").getElementsByTagName("tbody")[0];
                 tabela.appendChild(novaLinha);

                }
                else{
                    
                    linhaEscolhida.getElementsByTagName("td")[0].innerHTML = document.querySelector("#nome").value
                    linhaEscolhida.getElementsByTagName("td")[1].innerHTML = document.querySelector("#nome2").value
                    linhaEscolhida.getElementsByTagName("td")[2].innerHTML = document.querySelector("#sobrenome").value
                    linhaEscolhida.getElementsByTagName("td")[3].innerHTML = document.querySelector("#email").value
                    linhaEscolhida.getElementsByTagName("td")[4].innerHTML = document.querySelector("#telefone").value
                    linhaEscolhida.getElementsByTagName("td")[5].innerHTML = document.querySelector("#cargo").value
                }

                modal.style.display = "none";


            }

            const modal = document.getElementById("modal");
            const btnModal = document.getElementById("btn_add");
            const botaoCancel = document.getElementById("btnCancel");
            const botaoSave = document.getElementById("btnSave");
        
            btnModal.onclick = function() {
                document.querySelector("#nome").value=""
                document.querySelector("#sobrenome").value=""
                document.querySelector("#telefone").value =""
                document.querySelector("#email").value = ""
                modal.style.display = "block";
                acao ="Salvar"
            }
            botaoCancel.onclick = function() {
                modal.style.display = "none";
            }
            

   
            
  

            function validarNome(){
                var nome = document.querySelector("#nome").value
                if(nome==""){
                    document.querySelector("#labelNome").style.display = "block"
                }
                else{
                    document.querySelector("#labelNome").style.display = "none"
                    return nome
                }
            }

            function validarSobrenome(){
                var sobrenome = document.querySelector("#sobrenome").value
                if(sobrenome==""){
                    document.querySelector("#labelSobrenome").style.display = "block"
                }
                else{
                    document.querySelector("#labelSobrenome").style.display = "none"
                    return sobrenome
                }
            }
            function validarEmail(){
                var nome = document.querySelector("#email").value
                if(nome==""){
                    document.querySelector("#labelNome").style.display = "block"
                }
                else{
                    document.querySelector("#labelNome").style.display = "none"
                    return nome
                }
            }

            

            function Adicionar(){
                   
                acao = "Editar"
            }

function ExcluirFinal(){
// obtém a linha que contém a célula de lixeira clicada
var linha = linhaEscolhida

// remove a linha da tabela
linha.parentNode.removeChild(linha);
    modalEx.style.display = "none";
}
function CancelarEx(){
    modalEx.style.display = "none";
}





var campoPesquisa = document.getElementById("ipt_pesquisar");
var tabela = document.getElementById("tabela");
campoPesquisa.addEventListener("input", function() {
  // Obter o valor do campo de pesquisa
  var valor = campoPesquisa.value.toLowerCase();
  // Obter todas as linhas da tabela (exceto o cabeçalho)
  var linhas = tabela.getElementsByTagName("tr");




  for (var i = 1; i < linhas.length; i++) {
    // Obter o valor das células da linha (nome e sobrenome)
    var nome = linhas[i].getElementsByTagName("td")[0].textContent.toLowerCase();
    var sobrenome = linhas[i].getElementsByTagName("td")[1].textContent.toLowerCase();
    // Verificar se o nome ou sobrenome contém o valor pesquisado
    console.log(nome.indexOf(valor))
    if (nome.indexOf(valor) >= 0 || sobrenome.indexOf(valor) >= 0) {
      // Se o nome ou sobrenome contém o valor pesquisado, mostrar a linha
      linhas[i].style.display = "";
    } else {
      // Se o nome ou sobrenome não contém o valor pesquisado, ocultar a linha
      linhas[i].style.display = "none";
    }
  }
});
   
            
  

        </script>




























